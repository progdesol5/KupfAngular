<!-- TO GET FORM ID AND SETTINGUP LANGAUGE. -->
<input type="hidden" #AddIncomingLetters name="AddIncomingLetters" value="AddIncomingLetters">
<div class="notice d-flex bg-light-primary rounded border-primary border border-dashed p-6 mb-3">
    <div class="d-flex flex-stack flex-grow-1 flex-wrap flex-md-nowrap">
        <div class="row">
            <div class="btn-group" role="group" aria-label="Basic example"
                *ngFor="let bodyLabel of formBodyLabels; let i = index">
                <button type="button" class="btn btn-primary ArFontStyle fluro_btn_shade_i1" lang="AR-SA"
                    (click)="saveClick()">{{ 'content.saveIncoming' | translate }}</button>
                <button type="button" class="btn btn-primary ArFontStyle fluro_btn_shade_i2"
                    routerLink="/communication/incoming-letter-details"
                    lang="AR-SA">{{ 'content.cancel' | translate }}</button>
                <button type="button" class="btn btn-primary ArFontStyle fluro_btn_shade_i3" lang="AR-SA"
                    routerLink="/communication/incoming-letter-details"
                    routerLinkActive="active">{{ 'content.back' | translate }}</button>
                <button type="button" class="btn btn-primary ArFontStyle fluro_btn_shade_i4 "
                    lang="AR-SA">{{ 'content.incomingPrintLabel' | translate }}</button>
            </div>
        </div>
    </div>
</div>

<ngb-accordion #acc="ngbAccordion" class="mb-2" activeIds="ngb-panel-0">
    <ngb-panel id="ngb-panel-0">
        <ng-template ngbPanelTitle>
            <h3 class="m-0 ArFontStyle" lang="AR-SA" id="DocumentAttachments">{{ 'content.addIncomingLetters' | translate }}</h3>
        </ng-template>
        <ng-template ngbPanelContent>
            <div id="kt_billing_payment_tab_content" class="card-body tab-content"
                *ngFor="let bodyLabel of formBodyLabels; let i = index">
                <div id="kt_billing_creditcard" class="tab-pane fade show active" role="tabpanel">
                    <div class="row gx-9 gy-6">
                        <ngb-panel>
                            <form autocomplete="off" [formGroup]="inCommunicationForm">
                                <div class="row">
                                    <div class="col-lg-6 fv-row">
                                        <label class="col-form-label fw-bold fs-6 ArFontStyle"
                                            lang="AR-SA">{{ 'content.letterType' | translate }}</label>
                                        <ng-select [items]="letterType$ | async" bindLabel="shortName" bindValue="refId"
                                            lang="AR-SA" formControlName="letterType">
                                        </ng-select>
                                        <span class="text-danger"
                                                *ngIf="isFormSubmitted && inCommunicationFrm.letterType.errors?.required">
                                                {{ 'content.letterTypeValidation' | translate }}
                                            </span>
                                    </div>
                                    <div class="col-lg-6 fv-row">
                                        <label class="col-lg-4 col-form-label fw-bold fs-6 ArFontStyle"
                                            lang="AR-SA">{{ 'content.documentDate' | translate }}</label>
                                        <div class="input-group">
                                            <span class="input-group-text" id="basic-addon1">
                                                <i class="fas fa-calendar"></i>
                                            </span>
                                            <input type="text" class="form-control" bsDatepicker
                                                [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY',containerClass: 'theme-dark-blue' }"
                                                formControlName="receivedSentDate" lang="AR-SA" />                                                  
                                        </div>
                                        <span class="text-danger"
                                                *ngIf="isFormSubmitted && inCommunicationFrm.receivedSentDate.errors?.required">
                                                {{ 'content.documentDateValidation' | translate }}
                                            </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6 fv-row">
                                        <label class="col-form-label fw-bold fs-6 ArFontStyle"
                                            lang="AR-SA">{{ 'content.receivingParty' | translate }}</label>
                                        <ng-select [items]="partyType$ | async" bindLabel="refname1" bindValue="refId"
                                            lang="AR-SA" formControlName="senderReceiverParty">
                                        </ng-select>
                                        <span class="text-danger"
                                            *ngIf="isFormSubmitted && inCommunicationFrm.senderReceiverParty.errors?.required">
                                            {{ 'content.receivingPartyValidation' | translate }}
                                        </span>
                                    </div>
                                    <div class="col-lg-6 fv-row">
                                        <label class="col-lg-4 col-form-label fw-bold fs-6 ArFontStyle"
                                            lang="AR-SA">{{ 'content.representative' | translate }}</label>
                                        <input type="text" class="form-control form-control-lg  mb-3 mb-lg-0"
                                            formControlName="representative" />
                                            <span class="text-danger"
                                                *ngIf="isFormSubmitted && inCommunicationFrm.representative.errors?.required">
                                                {{ 'content.representativeValidation' | translate }}
                                            </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6 fv-row">
                                        <label class="col-form-label fw-bold fs-6 ArFontStyle"
                                            lang="AR-SA">{{ 'content.approvedBy' | translate }}</label>
                                        <ng-select [items]="users$ | async" bindLabel="firstName" bindValue="userId"
                                            formControlName="employeeId">
                                        </ng-select>
                                        <span class="text-danger"
                                                *ngIf="isFormSubmitted && inCommunicationFrm.employeeId.errors?.required">
                                                {{ 'content.approvedByValidation' | translate }}
                                            </span>
                                    </div>
                                    <div class="col-lg-6 fv-row">
                                        <label class="col-lg-4 col-form-label fw-bold fs-6 ArFontStyle"
                                            lang="AR-SA">{{ 'content.date' | translate }}</label>
                                        <div class="input-group">
                                            <span class="input-group-text" id="basic-addon1">
                                                <i class="fas fa-calendar"></i>
                                            </span>
                                            <input type="text" class="form-control" bsDatepicker
                                                [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY',containerClass: 'theme-dark-blue' }"
                                                formControlName="letterDated" lang="AR-SA" />
                                                
                                        </div>
                                        <span class="text-danger"
                                        *ngIf="isFormSubmitted && inCommunicationFrm.letterDated.errors?.required">
                                        {{ 'conten.dateValidation' | translate }}
                                    </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6 fv-row">
                                        <label class="col-form-label fw-bold fs-6 ArFontStyle"
                                            lang="AR-SA">{{ 'content.filedAt' | translate }}</label>
                                        <ng-select [items]="filledAt$ | async" bindLabel="shortName" bindValue="refId"
                                            lang="AR-SA" formControlName="filledAt">
                                        </ng-select>
                                        <span class="text-danger"
                                                *ngIf="isFormSubmitted && inCommunicationFrm.filledAt.errors?.required">
                                                {{ 'content.filedAtValidation' | translate }}
                                            </span>
                                    </div>
                                    <div class="col-lg-6 fv-row">
                                        <label class="col-lg-4 col-form-label fw-bold fs-6 ArFontStyle"
                                            lang="AR-SA">{{ 'content.description' | translate }}</label>
                                        <textarea class="form-control form-control-lg  mb-3 mb-lg-0"
                                            formControlName="description"></textarea>
                                            <span class="text-danger"
                                                *ngIf="isFormSubmitted && inCommunicationFrm.description.errors?.required">
                                                {{ 'content.descriptionValidation' | translate }}
                                            </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6 fv-row">
                                        <label class="col-lg-4 col-form-label fw-bold fs-6 ArFontStyle"
                                            lang="AR-SA">{{ 'content.searchTags' | translate }}</label>
                                        <input type="text" class="form-control form-control-lg  mb-3 mb-lg-0"
                                            formControlName="searchTag" />
                                            <span class="text-danger"
                                                *ngIf="isFormSubmitted && inCommunicationFrm.searchTag.errors?.required">
                                                {{ 'content.searchTagsValidation' | translate }}
                                            </span>
                                    </div>
                                </div>
                            </form>
                        </ngb-panel>
                    </div>
                </div>
            </div>
        </ng-template>
    </ngb-panel>
</ngb-accordion>
<br/>
<app-document-attachment></app-document-attachment>
